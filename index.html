<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preventivatore Demo</title>
<link rel="stylesheet" href="style.css">
<script src="database.js"></script>
</head>
<body>

<div id="loginBox">
  <h2>Accesso riservato</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Accedi</button>
  <p id="loginError">Credenziali errate</p>
</div>

<div id="app" style="display:none">
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IL MATTONCINO S.R.L. - Preventivatore Edile</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-container">
                        <img src="LOGO.jpg" alt="IL MATTONCINO S.R.L." class="company-logo">
                    </div>
                    <p>Preventivatore Edile Professionale</p>
                </div>
            </div>
        </header>

        <!-- Sezione Dati Azienda -->
        <div class="card section-card">
            <h2>DATI AZIENDA</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Nome Ditta</label>
                    <input type="text" id="nomeDitta" class="form-control" value="IL MATTONCINO S.R.L.">
                </div>
                <div class="form-group">
                    <label class="form-label">Indirizzo</label>
                    <input type="text" id="indirizzoAzienda" class="form-control" value="Viale A. Costa, 62, Imola, 40026 (BO)">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefono</label>
                    <input type="tel" id="telefonoAzienda" class="form-control" value="+39 342 130 5313">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="emailAzienda" class="form-control" value="ilmattoncinosrl@outlook.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Partita IVA</label>
                    <input type="text" id="partitaIva" class="form-control" value="03590791202">
                </div>
                <div class="form-group">
                    <label class="form-label">N¬∞ Preventivo</label>
                    <input type="text" id="numeroPreventivo" class="form-control" value="001">
                </div>
            </div>
        </div>

        <!-- Sezione Titolo Preventivo -->
        <div class="card section-card">
            <h2>TITOLO PREVENTIVO</h2>
            <div class="form-group">
                <label class="form-label">Titolo personalizzato (opzionale)</label>
                <input type="text" id="titoloPreventivo" class="form-control" placeholder="Es: Ristrutturazione appartamento, Lavori di muratura, ecc...">
                <small class="form-help">Se vuoto, sar√† utilizzato "PREVENTIVO LAVORI EDILI"</small>
            </div>
        </div>

        <!-- Sezione Dati Cliente -->
        <div class="card section-card">
            <h2>DATI CLIENTE</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Nome/Ragione Sociale *</label>
                    <input type="text" id="nomeCliente" class="form-control" placeholder="Nome cliente" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Indirizzo</label>
                    <input type="text" id="indirizzoCliente" class="form-control" placeholder="Indirizzo cliente">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefono</label>
                    <input type="tel" id="telefonoCliente" class="form-control" placeholder="Telefono cliente">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="emailCliente" class="form-control" placeholder="Email cliente">
                </div>
                <div class="form-group">
                    <label class="form-label">Codice Fiscale / Partita IVA</label>
                    <input type="text" id="cfPivaCliente" class="form-control" placeholder="CF o P.IVA cliente">
                </div>
            </div>
        </div>

        <!-- Sezione Selezione Materiali -->
        <div class="card section-card">
            <h2>AGGIUNGI MATERIALI/SERVIZI</h2>
            
            <div class="materiali-row-1">
                <div class="form-group">
                    <label class="form-label">Categoria</label>
                    <select id="categoria" class="form-control">
                        <option value="">Seleziona categoria</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Sottocategoria</label>
                    <select id="sottocategoria" class="form-control" disabled>
                        <option value="">Prima seleziona una categoria</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Descrizione</label>
                    <select id="descrizione" class="form-control" disabled>
                        <option value="">Prima seleziona una sottocategoria</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Descrizione Personalizzata *</label>
                    <input type="text" id="descrizionePersonalizzata" class="form-control" placeholder="Inserisci descrizione personalizzata">
                    <small class="form-help">Se compilato, verr√† usato al posto della selezione</small>
                </div>
            </div>
            
            <div class="materiali-row-2">
                <div class="form-group">
                    <label class="form-label">Quantit√†</label>
                    <input type="number" id="quantita" class="form-control" min="0" step="0.01" placeholder="0">
                </div>
                <div class="form-group">
                    <label class="form-label">Prezzo Unitario (‚Ç¨)</label>
                    <input type="number" id="prezzoUnitario" class="form-control" min="0" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label class="form-label">Unit√† Misura</label>
                    <select id="unitaMisura" class="form-control">
                        <option value="">Seleziona...</option>
                        <option value="mq">mq</option>
                        <option value="ml">ml</option>
                        <option value="cad">cad</option>
                        <option value="kg">kg</option>
                        <option value="ton">ton</option>
                        <option value="q">q</option>
                        <option value="ora">ora</option>
                        <option value="a corpo">a corpo</option>
                        <option value="custom">Altra unit√†...</option>
                    </select>
                    <input type="text" id="unitaMisuraCustom" class="form-control hidden" placeholder="Inserisci unit√† personalizzata">
                </div>
                <div class="form-group">
                    <label class="form-label">Sconto %</label>
                    <input type="number" id="sconto" class="form-control" min="0" max="100" step="0.1" value="0">
                </div>
            </div>
            
            <div class="materiali-row-3">
                <button id="aggiungiVoce" class="btn btn--primary btn--lg">
                    ‚ûï AGGIUNGI AL PREVENTIVO
                </button>
            </div>
        </div>

        <!-- Tabella Preventivo -->
        <div class="card section-card">
            <h2>PREVENTIVO</h2>
            <div class="table-container">
                <table id="tabellaPreventivo" class="preventivo-table">
                    <thead>
                        <tr>
                            <th>Descrizione</th>
                            <th>U.M.</th>
                            <th>Qt√†</th>
                            <th>Prezzo Unit. (‚Ç¨)</th>
                            <th>Sconto %</th>
                            <th>Importo (‚Ç¨)</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            
            <div class="iva-section">
                <div class="iva-controls">
                    <label class="checkbox-container">
                        <input type="checkbox" id="includiIva">
                        <span class="checkmark"></span>
                        Includi IVA nel preventivo
                    </label>
                    <div id="ivaSettings" class="iva-settings hidden">
                        <label class="form-label">Percentuale IVA</label>
                        <select id="percentualeIva" class="form-control">
                            <option value="0">0%</option>
                            <option value="4">4%</option>
                            <option value="10">10%</option>
                            <option value="22" selected>22%</option>
                            <option value="custom">Personalizzata...</option>
                        </select>
                        <input type="number" id="ivaCustom" class="form-control hidden" min="0" max="100" step="0.1" placeholder="Inserisci %">
                    </div>
                </div>
            </div>
            
            <div class="totals-section">
                <div class="totals-row">
                    <strong>Totale Imponibile: <span id="totaleImponibile">‚Ç¨ 0,00</span></strong>
                </div>
                <div id="rigaIva" class="totals-row hidden">
                    <strong>IVA <span id="labelPercentualeIva">22</span>%: <span id="totaleIva">‚Ç¨ 0,00</span></strong>
                </div>
                <div class="totals-row total-final">
                    <strong>TOTALE FINALE: <span id="totaleFinale">‚Ç¨ 0,00</span></strong>
                </div>
            </div>
        </div>

        <!-- Sezione Note e Finalizzazione -->
        <div class="card section-card">
            <h2>FINALIZZAZIONE PREVENTIVO</h2>
            <div class="form-grid">
                <div class="form-group span-2">
                    <label class="form-label">Note finali</label>
                    <textarea id="notePreventivo" class="form-control" rows="4">Eventuali ore in economia saranno contabilizzate al costo orario di ‚Ç¨ 37,00. Sono esclusi dal preventivo IVA, acqua ed energia elettrica.</textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Modalit√† di Pagamento</label>
                    <select id="modalitaPagamento" class="form-control">
                        <option value="rimessa diretta">Rimessa diretta</option>
                        <option value="bonifico bancario">Bonifico bancario</option>
                        <option value="contanti">Contanti</option>
                        <option value="assegno">Assegno</option>
                        <option value="carta di credito">Carta di credito</option>
                        <option value="custom">Personalizzata...</option>
                    </select>
                    <input type="text" id="pagamentoCustom" class="form-control hidden" placeholder="Inserisci modalit√† personalizzata">
                </div>
                <div class="form-group">
                    <label class="form-label">Validit√† (giorni)</label>
                    <input type="number" id="validita" class="form-control" value="30" min="1">
                </div>
                <div class="form-group">
                    <label class="form-label">Data Preventivo</label>
                    <input type="date" id="dataPreventivo" class="form-control">
                </div>
            </div>
        </div>

        <!-- Pulsanti Finali -->
        <div class="card section-card">
            <div class="button-row">
                <button id="anteprimaPreventivo" class="btn btn--primary btn--lg">
                    üëÅÔ∏è ANTEPRIMA
                </button>
                <button id="generaPDF" class="btn btn--primary btn--lg">
                    üìÑ GENERA PDF
                </button>
                <button id="nuovoPreventivo" class="btn btn--secondary btn--lg">
                    üîÑ NUOVO PREVENTIVO
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

</div>

<script src="app.js"></script>
</body>
</html>
